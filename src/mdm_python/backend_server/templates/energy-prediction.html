<!DOCTYPE html>
<html lang="en">
    {% extends "base.html" %}
    <head>
        {% block head %}{{ super() }}{% endblock %}
    </head>
    <body>
        {% block header %}{{ super() }}{% endblock %}
        {% block navbar %}{{ super() }}{% endblock %}
        {% block title %} Modell {% endblock %}
        {% block main %}{{ super() }}{% endblock %}


        {% block content %}

  
        
  <p>Please choose the Energy-Type</p>


  <div class="form-check">
    <p><label><input class="form-check-input" type="checkbox" name="types" value="Wind"> Wind</label></p>
    <p><label><input class="form-check-input" type="checkbox" name="types" value="Solar"> Solar</label></p>
    <p><label><input class="form-check-input" type="checkbox" name="types" value="Nuclear"> Nuclear</label></p>
    <p><label><input class="form-check-input" type="checkbox" name="types" value="Water-River"> Water-River</label></p>
    <p><label><input class="form-check-input" type="checkbox" name="types" value="Water-Pump"> Water-Pump</label></p>
    <p><label><input class="form-check-input" type="checkbox" name="types" value="Water-Reservoir"> Water-Reservoir</label></p>
  </div>
     
  <p>Please select the Forecast-Horizon.</p>
  <label for="forecastHorizon">Forecast Horizon:</label>
  <input type="number" id="forecastHorizon" name="forecastHorizon" min="1" value="10">
  <button id="sendDataButton">Send Data</button>

        

     Here should be 1 - 6 plots, depending on the user-input

     <div id="plotContainer"></div>



        {% endblock %}

      </body>

        {% block scripts %}
        <script>

        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('sendDataButton').addEventListener('click', sendData);
        });

          function sendData() {
            var checkboxes = document.querySelectorAll('input[name="types"]:checked');
            var forecastHorizon = document.getElementById("forecastHorizon").value;
            var selectedTypes = [];
            checkboxes.forEach(function(checkbox) {
              selectedTypes.push(checkbox.value);
            });
            fetch('/energy-prediction', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify({ types: selectedTypes, forecastHorizon: forecastHorizon })
            })
            .then(response => {
              if (!response.ok) {
                throw new Error('Network response was not ok');
              }
              return response.json();
            })
            .then(data => {
              console.log(data);
            })
            .catch(error => {
              console.error('There was a problem with your fetch operation:', error);
            });
          }

          function displayPlots(plotPaths) {
            const plotContainer = document.getElementById('plotContainer');
            plotContainer.innerHTML = ''; // Clear existing plots
        
            for (const [energyType, plotPath] of Object.entries(plotPaths)) {
                const img = document.createElement('img');
                img.src = plotPath; // Set the source of the image
                img.alt = `Energy prediction plot for ${energyType}`;
                img.style.width = '100%'; // Optional: Set image width
                plotContainer.appendChild(img); // Add the image to the container
            }
        }

        </script>
        {% endblock %}
</html>